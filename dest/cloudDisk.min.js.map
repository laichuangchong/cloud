{"version":3,"sources":["../js/controller/cloudDisk.js"],"names":["private_cloud","controller","$scope","$rootScope","$http","cloud_service","$interval","diskStatus","in-use","available","creating","deleting","detaching","attaching","error","url","headers","then","response","console","log","disks","data","volumes","angular","forEach","value","key","status","id","volume","cancel","alert","statusText","getCloud","cloud_promise","promise","editInuse"],"mappings":";AAGAA,cAAcC,WAAW,yBAAuB,UAAS,cAAa,SAAQ,iBAAgB,aAAY,SAASC,GAAOC,GAAWC,GAAMC,GAAcC;IACrJJ,EAAOK;QACHC,UAAS;QACTC,WAAU;QACVC,UAAS;QACTC,UAAS;QACTC,WAAU;QACVC,WAAU;QACVC,OAAM;OAEVV;QACIW,KAAI;QACJC,SAAQb,EAAWa;OACpBC,KAAK,SAASC;QACbC,QAAQC,IAAIF,IACZhB,EAAOmB,QAAQH,EAASI,KAAKC,SAC7BC,QAAQC,QAAQvB,EAAOmB,OAAM,SAASK,GAAMC;YACpB,YAAhBD,EAAME,UAAuC,eAAfF,EAAME,UAAyC,WAAfF,EAAME,WACpET,QAAQC,IAAIO;YACZzB,EAAO,oBAAoByB,KAAOrB,EAAU;gBACxCF;oBACIW,KAAK,wBAAsBW,EAAMG;oBACjCb,SAASb,EAAWa;mBACrBC,KAAK,SAAUC;oBACdC,QAAQC,IAAIF;oBACZ,IAAII,IAAOJ,EAASI,KAAKQ,OAAOF;oBACnB,YAARN,KAA8B,eAARA,KAAiC,WAARA,MAChDhB,EAAUyB,OAAO7B,EAAO,oBAAoByB;oBAC5CzB,EAAO,oBAAoByB,KAAO;mBAExC,SAAST;oBACPc,MAAMd,EAASe;;eAEpB;;OAKb,SAASf;QACPc,MAAMd,EAASe;QAGnB5B,EAAc6B,YACd/B,EAAWgC,cAAcC,QAAQnB,KAAK,SAASC;QAC3CC,QAAQC,IAAIF;QAGhBhB,EAAOmC,YAAY","file":"cloudDisk.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/1/16.\n */\nprivate_cloud.controller('cloudDiskController',['$scope','$rootScope','$http','cloud_service','$interval',function($scope,$rootScope,$http,cloud_service,$interval){\n    $scope.diskStatus = {\n        \"in-use\":'已挂载',\n        available:'可用',\n        creating:'正在创建',\n        deleting:'删除中',\n        detaching:'分离中',\n        attaching:'连接中',\n        error:'错误'\n    };\n    $http({ //云硬盘列表\n        url:'/api/list_volumes',\n        headers:$rootScope.headers\n    }).then(function(response){\n        console.log(response);\n        $scope.disks = response.data.volumes;\n        angular.forEach($scope.disks,function(value,key){\n            if((value.status != \"in-use\") && (value.status !=\"available\") && (value.status !='error')){\n                console.log(key);\n                $scope['volumesInterval' + key] = $interval(function () {\n                    $http({\n                        url: ' /api/list_volumes/'+value.id,\n                        headers: $rootScope.headers\n                    }).then(function (response) {\n                        console.log(response);\n                        var data = response.data.volume.status;\n                        if ((data == \"in-use\") || (data == \"available\") || (data == 'error')) {\n                            $interval.cancel($scope['volumesInterval' + key]);\n                            $scope['volumesInterval' + key] = null;\n                        }\n                    },function(response){\n                        alert(response.statusText);\n                    });\n                }, 10000);\n\n            }\n        });\n\n    },function(response){\n        alert(response.statusText);\n    });\n\n    cloud_service.getCloud();\n    $rootScope.cloud_promise.promise.then(function(response){\n        console.log(response);\n    });\n\n    $scope.editInuse = function(){ //编辑挂在\n        \n    };\n}]);"]}