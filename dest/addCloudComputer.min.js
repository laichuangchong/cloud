/*! cloud - v1.0.0 - 2018-01-25 */
private_cloud.controller("addCloudComputerController", [ "$scope", "$rootScope", "$http", "$state", function(t, e, o, a) {
    t.formData = {
        computerCount: 1,
        net_work: []
    }, o({
        url: "/api/nova_limits",
        method: "GET",
        headers: e.headers
    }).then(function(e) {
        console.log(e.data.limits.absolute);
        var o = e.data.limits.absolute;
        t.count = {
            instances: {
                title: "云主机",
                used: o.totalInstancesUsed,
                total: o.maxTotalInstances,
                unit: "个"
            },
            cores: {
                title: "VCPUs",
                used: o.totalCoresUsed,
                total: o.maxTotalCores,
                unit: "个"
            },
            ram: {
                title: "内存",
                used: o.totalRAMUsed / 1024,
                total: o.maxTotalRAMSize / 1024,
                unit: "GB"
            }
        };
    }, function(t) {
        console.log(t);
    }), t.changeConfig = function(e) {
        console.log(e), t.coresChangeProgress = e.vcpus, t.ramChangeProgress = e.ram / 1024;
    }, t.formSubmit = function(n) {
        n.preventDefault(), o({
            url: "/api/list_servers/",
            method: "POST",
            headers: e.headers,
            data: {
                server: {
                    name: t.formData.name,
                    imageRef: t.formData.imageRef,
                    flavorRef: t.formData.flavorRef.id,
                    availability_zone: "nova",
                    "OS-DCF:diskConfig": "AUTO",
                    security_groups: [ {
                        name: "default"
                    } ],
                    networks: [ {
                        uuid: "80bee3ca-4981-4285-b682-943e77d7a4c7"
                    } ],
                    min_count: t.formData.computerCount
                }
            }
        }).then(function(t) {
            console.log(t), 202 == t.status && (alert("添加成功"), a.go("count.cloudComputer"));
        }, function() {});
    };
} ]);
//# sourceMappingURL=addCloudComputer.min.js.map