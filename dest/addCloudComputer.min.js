/*! cloud - v1.0.0 - 2018-02-01 */
private_cloud.controller("addCloudComputerController", [ "$scope", "$rootScope", "$http", "$state", "less_one_service", "count_service", function(o, e, t, r, a, n) {
    o.formData = {
        computerCount: 1,
        net_work: []
    }, n.getCount(), o.changeConfig = function(e) {
        console.log(e), o.coresChangeProgress = e.vcpus, o.ramChangeProgress = e.ram / 1024;
    }, o.formSubmit = function(a) {
        a.preventDefault();
        var n = [], u = [];
        o.formData.security && n.push({
            name: "default"
        }), angular.forEach(o.formData.net_work, function(o, t) {
            o && u.push({
                uuid: e.net_work[t].id
            });
        }), console.log(u), t({
            url: "/api/list_servers/",
            method: "POST",
            headers: e.headers,
            data: {
                server: {
                    name: o.formData.name,
                    imageRef: o.formData.imageRef,
                    flavorRef: o.formData.flavorRef.id,
                    availability_zone: "nova",
                    "OS-DCF:diskConfig": "AUTO",
                    security_groups: n,
                    networks: u,
                    min_count: o.formData.computerCount
                }
            }
        }).then(function(o) {
            console.log(o), 202 == o.status && (alert("添加成功"), r.go("count.cloudComputer"));
        }, function(o) {
            alert(o.statusText);
        });
    }, o.changeNetworkMark = function() {
        o.changeNetwork = !0, console.log(o.changeNetwork);
    }, o.lessone = function(o) {
        return a.change(o);
    };
} ]);
//# sourceMappingURL=addCloudComputer.min.js.map