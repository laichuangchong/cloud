/*! cloud - v1.0.0 - 2018-02-02 */
private_cloud.controller("addCloudComputerController", [ "$scope", "$rootScope", "$http", "$state", "less_one_service", "count_service", "images_service", function(e, o, a, t, r, n, s) {
    e.formData = {
        computerCount: 1,
        net_work: [],
        security: !0
    }, t.params.imageid && (e.formData.imageRef = t.params.imageid), n.getCount(), s.getImages(), 
    o.images_promise.promise.then(function(o) {
        e.images = o.data.images;
    }), e.changeConfig = function(o) {
        console.log(o), e.coresChangeProgress = o.vcpus, e.ramChangeProgress = o.ram / 1024;
    }, e.formSubmit = function(r) {
        r.preventDefault();
        var n = [], s = [];
        e.formData.security && n.push({
            name: "default"
        }), angular.forEach(e.formData.net_work, function(e, a) {
            e && s.push({
                uuid: o.net_work[a].id
            });
        }), console.log(s), a({
            url: "/api/list_servers/",
            method: "POST",
            headers: o.headers,
            data: {
                server: {
                    name: e.formData.name,
                    imageRef: e.formData.imageRef,
                    flavorRef: e.formData.flavorRef.id,
                    availability_zone: "nova",
                    "OS-DCF:diskConfig": "AUTO",
                    security_groups: n,
                    networks: s,
                    min_count: e.formData.computerCount
                }
            }
        }).then(function(e) {
            console.log(e), 202 == e.status && (alert("添加成功"), t.go("count.cloudComputer"));
        }, function(e) {
            alert(e.statusText);
        });
    }, e.changeNetworkMark = function() {
        e.changeNetwork = !0, console.log(e.changeNetwork);
    }, e.lessone = function(e) {
        return r.change(e);
    };
} ]);
//# sourceMappingURL=addCloudComputer.min.js.map