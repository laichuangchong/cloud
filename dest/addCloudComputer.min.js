/*! cloud - v1.0.0 - 2018-01-30 */
private_cloud.controller("addCloudComputerController", [ "$scope", "$rootScope", "$http", "$state", "less_one_service", "count_service", function(e, o, t, r, a, n) {
    e.formData = {
        computerCount: 1,
        net_work: []
    }, n.getCount(), e.changeConfig = function(o) {
        console.log(o), e.coresChangeProgress = o.vcpus, e.ramChangeProgress = o.ram / 1024;
    }, e.formSubmit = function(a) {
        a.preventDefault();
        var n = [], u = [];
        e.formData.security && n.push({
            name: "default"
        }), angular.forEach(e.formData.net_work, function(e, t) {
            e && u.push({
                uuid: o.net_work[t].id
            });
        }), console.log(u), t({
            url: "/api/list_servers/",
            method: "POST",
            headers: o.headers,
            data: {
                server: {
                    name: e.formData.name,
                    imageRef: e.formData.imageRef,
                    flavorRef: e.formData.flavorRef.id,
                    availability_zone: "nova",
                    "OS-DCF:diskConfig": "AUTO",
                    security_groups: n,
                    networks: u,
                    min_count: e.formData.computerCount
                }
            }
        }).then(function(e) {
            console.log(e), 202 == e.status && (alert("添加成功"), r.go("count.cloudComputer"));
        }, function(e) {
            alert(e.statusText);
        });
    }, e.changeNetworkMark = function() {
        e.changeNetwork = !0;
    }, e.lessone = function(e) {
        return a.change(e);
    };
} ]);
//# sourceMappingURL=addCloudComputer.min.js.map