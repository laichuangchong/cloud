{"version":3,"sources":["../js/controller/cloudDiskDetail.js"],"names":["private_cloud","controller","$scope","$rootScope","$http","$state","cloud_service","$q","disk_promise","defer","url","params","id","headers","then","response","console","log","resolve","data","volume","alert","statusText","getCloud","all","promise","cloud_promise","disk","cloud","servers","attachments","serverId","cloudMsg","clouds","i","length","searchCloud"],"mappings":";AAGAA,cAAcC,WAAW,+BAA6B,UAAS,cAAa,SAAQ,UAAS,iBAAgB,MAAK,SAASC,GAAOC,GAAWC,GAAMC,GAAOC,GAAcC;IACpKL,EAAOM,eAAeD,EAAGE,SACzBL;QACIM,KAAI,uBAAqBL,EAAOM,OAAOC;QACvCC,SAAQV,EAAWU;OACpBC,KAAK,SAASC;QACbC,QAAQC,IAAIF,IACZb,EAAOM,aAAaU,QAAQH,EAASI,KAAKC;OAC5C,SAASL;QACPM,MAAMN,EAASO;QASnBhB,EAAciB,YACdhB,EAAGiB,MAAKtB,EAAOM,aAAaiB,SAAQtB,EAAWuB,cAAcD,WAAUX,KAAK,SAASK;QACjFH,QAAQC,IAAIE,IACZjB,EAAOyB,OAAOR,EAAK,IACnBjB,EAAO0B,QAAQT,EAAK,GAAGA,KAAKU,SAC5Bb,QAAQC,IAAIf,EAAOyB,KAAKG,YAAY,GAAGC;QACvC7B,EAAO8B,WAbX,SAAqBC,GAAOF;YACxB,KAAI,IAAIG,IAAE,GAAGA,IAAED,EAAOE,QAAQD,KAC1B,IAAGD,EAAOC,GAAGtB,MAAMmB,GACf,OAAOE,EAAOC;SAUJE,CAAYlC,EAAO0B,OAAM1B,EAAOyB,KAAKG,YAAY,GAAGC,WACtEf,QAAQC,IAAIf,EAAO8B","file":"cloudDiskDetail.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/2/7.\n */\nprivate_cloud.controller('cloudDiskDetailController',['$scope','$rootScope','$http','$state','cloud_service','$q',function($scope,$rootScope,$http,$state,cloud_service,$q){\n    $scope.disk_promise = $q.defer();\n    $http({\n        url:'/api/list_volumes/'+$state.params.id,\n        headers:$rootScope.headers\n    }).then(function(response){\n        console.log(response);\n        $scope.disk_promise.resolve(response.data.volume);\n    },function(response){\n        alert(response.statusText);\n    });\n    function searchCloud(clouds,serverId){ //查看绑定云主机名称\n        for(var i=0; i<clouds.length; i++){\n            if(clouds[i].id == serverId) {\n                return clouds[i];\n            }\n        }\n    }\n    cloud_service.getCloud(); //获取云主机信息\n    $q.all([$scope.disk_promise.promise,$rootScope.cloud_promise.promise]).then(function(data){\n        console.log(data);\n        $scope.disk = data[0];\n        $scope.cloud = data[1].data.servers;\n        console.log($scope.disk.attachments[0].serverId);\n        $scope.cloudMsg = searchCloud($scope.cloud,$scope.disk.attachments[0].serverId);\n        console.log($scope.cloudMsg);\n    });\n\n}]);\n// 2acf9d81-c6e4-4ff3-af0b-d470898914e8"]}