{"version":3,"sources":["../js/main_common.js"],"names":["private_cloud","run","$rootScope","$q","$http","tokenService","getToken","localStorage","getItem","network_promise","defer","net_work","token_promise","promise","then","token","headers","X-Auth-Token","Accept","console","log","url","method","response","data","images","alert","error","message","flavors","networks","angular","forEach","value","key","fixedName","name","floatingName","resolve","info"],"mappings":";AAGAA,cAAcC,MAAK,cAAa,MAAK,SAAQ,gBAAe,SAASC,GAAWC,GAAGC,GAAMC;IACrFA,EAAaC,SAASC,aAAaC,QAAQ,aAAaD,aAAaC,QAAQ;IAC7EN,EAAWO,kBAAkBN,EAAGO,SAChCR,EAAWS,eACXT,EAAWU,cAAcC,QAAQC,KAAK,SAAUC;QAC5Cb,EAAWc;YACPC,gBAAeF;YACfG,QAAU;WAEdC,QAAQC,IAAI,WAASL,IACrBX;YACIiB,KAAK;YACLC,QAAQ;YACRN,SAASd,EAAWc;WACrBF,KAAK,SAAUS;YACdJ,QAAQC,IAAIG,EAASC,KAAKC,SAC1BvB,EAAWuB,SAASF,EAASC,KAAKC;WACnC,SAAUF;YACTG,MAAMH,EAASC,KAAKG,MAAMC;YAG9BxB;YACIiB,KAAK;YACLC,QAAQ;YACRN,SAASd,EAAWc;WACrBF,KAAK,SAAUS;YACdJ,QAAQC,IAAIG,IACZrB,EAAW2B,UAAUN,EAASC,KAAKK;WACpC,SAAUN;YACTG,MAAMH,EAASC,KAAKG,MAAMC;YAG9BxB;YACIiB,KAAK;YACLC,QAAQ;YACRN,SAASd,EAAWc;WACrBF,KAAK,SAAUS;YACdJ,QAAQC,IAAIG,EAASC,KAAKM,WAC1BC,QAAQC,QAAQT,EAASC,KAAKM,UAAU,SAAUG,GAAOC;gBACrD,QAAQD,EAAM;kBACV,KAAK;oBACD/B,EAAWS,SAASwB,YAAYF,EAAMG;oBACtC;;kBACJ,KAAK;oBACDlC,EAAWS,SAAS0B,eAAeJ,EAAMG;;gBAMrDlC,EAAWO,gBAAgB6B;WAC5B,SAAUf;YACTG,MAAMH,EAASC,KAAKG,MAAMC;;OAE/B,SAAUW;QACTpB,QAAQC,IAAImB","file":"main_common.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/1/18.\n */\nprivate_cloud.run(['$rootScope','$q','$http','tokenService',function($rootScope,$q,$http,tokenService){ //测试获取token\n    tokenService.getToken(localStorage.getItem('username'), localStorage.getItem('password'));\n    $rootScope.network_promise = $q.defer();\n    $rootScope.net_work = {};//网络类型名称\n    $rootScope.token_promise.promise.then(function (token) {\n        $rootScope.headers = {\n            'X-Auth-Token':token,\n            'Accept': 'application/json'\n        };\n        console.log('重新获取成功'+token);\n        $http({ //获取镜像\n            url: \"/api/list_images\",\n            method: 'GET',\n            headers: $rootScope.headers\n        }).then(function (response) {\n            console.log(response.data.images);\n            $rootScope.images = response.data.images;//所有镜像列表\n        }, function (response) {\n            alert(response.data.error.message);\n        });\n\n        $http({ //获取所有配置类型\n            url: \"/api/list_flavors/detail\",\n            method: 'GET',\n            headers: $rootScope.headers\n        }).then(function (response) {\n            console.log(response);\n            $rootScope.flavors = response.data.flavors;\n        }, function (response) {\n            alert(response.data.error.message);\n        });\n\n        $http({ //获取所有网络类型\n            url: \"/api/list_networks\",\n            method: 'GET',\n            headers: $rootScope.headers\n        }).then(function (response) {\n            console.log(response.data.networks);\n            angular.forEach(response.data.networks, function (value, key) {\n                switch (value[\"provider:network_type\"]) {\n                    case 'vxlan':\n                        $rootScope.net_work.fixedName = value.name;\n                        break;\n                    case 'flat':\n                        $rootScope.net_work.floatingName = value.name;\n                        break;\n                }\n\n            });\n\n            $rootScope.network_promise.resolve();\n        }, function (response) {\n            alert(response.data.error.message);\n        });\n    }, function (info) {\n        console.log(info);\n    });\n}]);"]}