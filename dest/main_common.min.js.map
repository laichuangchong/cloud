{"version":3,"sources":["../js/main_common.js"],"names":["private_cloud","run","$rootScope","$q","$http","tokenService","count_service","getToken","localStorage","getItem","images_promise","defer","flavors_promise","net_work","token_promise","promise","then","token","headers","X-Auth-Token","Accept","console","log","url","method","response","data","images","resolve","alert","error","message","flavors","networks","info"],"mappings":";AAGAA,cAAcC,MAAK,cAAa,MAAK,SAAQ,gBAAe,iBAAgB,SAASC,GAAWC,GAAGC,GAAMC,GAAaC;IAClHD,EAAaE,SAASC,aAAaC,QAAQ,aAAaD,aAAaC,QAAQ;IAE7EP,EAAWQ,iBAAiBP,EAAGQ,SAC/BT,EAAWU,kBAAkBT,EAAGQ,SAChCT,EAAWW,eACXX,EAAWY,cAAcC,QAAQC,KAAK,SAAUC;QAC5Cf,EAAWgB;YACPC,gBAAeF;YACfG,QAAU;WAEdC,QAAQC,IAAI,WAASL,IACrBb;YACImB,KAAK;YACLC,QAAQ;YACRN,SAAShB,EAAWgB;WACrBF,KAAK,SAAUS;YACdJ,QAAQC,IAAIG,EAASC,KAAKC,SAC1BzB,EAAWyB,SAASF,EAASC,KAAKC,QAClCzB,EAAWQ,eAAekB;WAC3B,SAAUH;YACTI,MAAMJ,EAASC,KAAKI,MAAMC;YAG9B3B;YACImB,KAAK;YACLC,QAAQ;YACRN,SAAShB,EAAWgB;WACrBF,KAAK,SAAUS;YACdJ,QAAQC,IAAIG,IACZvB,EAAW8B,UAAUP,EAASC,KAAKM,SACnC9B,EAAWU,gBAAgBgB;WAC5B,SAAUH;YACTI,MAAMJ,EAASC,KAAKI,MAAMC;YAG9B3B;YACImB,KAAK;YACLC,QAAQ;YACRN,SAAShB,EAAWgB;WACrBF,KAAK,SAAUS;YACdJ,QAAQC,IAAIG,EAASC,KAAKO,WAC1B/B,EAAWW,WAAWY,EAASC,KAAKO,UACpCZ,QAAQC,IAAIpB,EAAWW;WAExB,SAAUY;YACTI,MAAMJ,EAASC,KAAKI,MAAMC;;OAI/B,SAAUG;QACTb,QAAQC,IAAIY","file":"main_common.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/1/18.\n */\nprivate_cloud.run(['$rootScope','$q','$http','tokenService','count_service',function($rootScope,$q,$http,tokenService,count_service){ //测试获取token\n    tokenService.getToken(localStorage.getItem('username'), localStorage.getItem('password'));\n    // $rootScope.network_promise = $q.defer();\n    $rootScope.images_promise = $q.defer();\n    $rootScope.flavors_promise = $q.defer();\n    $rootScope.net_work = {};//网络类型名称\n    $rootScope.token_promise.promise.then(function (token) {\n        $rootScope.headers = {\n            'X-Auth-Token':token,\n            'Accept': 'application/json'\n        };\n        console.log('重新获取成功'+token);\n        $http({ //获取镜像\n            url: \"/api/list_images\",\n            method: 'GET',\n            headers: $rootScope.headers\n        }).then(function (response) {\n            console.log(response.data.images);\n            $rootScope.images = response.data.images;//所有镜像列表\n            $rootScope.images_promise.resolve();\n        }, function (response) {\n            alert(response.data.error.message);\n        });\n\n        $http({ //获取所有配置类型\n            url: \"/api/list_flavors/detail\",\n            method: 'GET',\n            headers: $rootScope.headers\n        }).then(function (response) {\n            console.log(response);\n            $rootScope.flavors = response.data.flavors;\n            $rootScope.flavors_promise.resolve();\n        }, function (response) {\n            alert(response.data.error.message);\n        });\n\n        $http({ //获取所有网络类型\n            url: \"/api/list_networks\",\n            method: 'GET',\n            headers: $rootScope.headers\n        }).then(function (response) {\n            console.log(response.data.networks);\n            $rootScope.net_work = response.data.networks;\n            console.log($rootScope.net_work);\n            // $rootScope.network_promise.resolve();\n        }, function (response) {\n            alert(response.data.error.message);\n        });\n\n       \n    }, function (info) {\n        console.log(info);\n    });\n}]);"]}