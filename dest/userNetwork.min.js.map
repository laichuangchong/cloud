{"version":3,"sources":["../js/controller/userNetwork.js"],"names":["private_cloud","controller","$scope","$rootScope","$http","subnets_service","adminstatus","true","false","getSubnets","subnets_promise","promise","then","data","url","headers","response","console","log","networks","angular","forEach","value","key","subnets","subvalue","subnetvalue","id","name","undefined","subnetInfo","cidr","alert","statusText","editData","networkId","editNetFormData","admin_state_up","String","formSubmit","$event","type","method","$","modal","$timeout","$state","go","reload"],"mappings":";AAGAA,cAAcC,WAAW,2BAAyB,UAAS,cAAa,SAAQ,mBAAkB,SAASC,GAAOC,GAAWC,GAAMC;IAC/HH,EAAOI;QACHC,MAAK;QACLC,OAAM;OAEVH,EAAgBI,cAChBN,EAAWO,gBAAgBC,QAAQC,KAAK,SAASC;QAC7CT;YACIU,KAAI;YACJC,SAAQZ,EAAWY;WACpBH,KAAK,SAASI;YACbC,QAAQC,IAAIF,IACZd,EAAOiB,WAAWH,EAASH,KAAKM,UAChCC,QAAQC,QAAQnB,EAAOiB,UAAS,SAASG,GAAMC;gBAC3CH,QAAQC,QAAQC,EAAME,SAAS,SAAUC;oBACrCL,QAAQC,QAAQR,GAAK,SAASa;wBACvBD,KAAYC,EAAYC,OACvBV,QAAQC,IAAIQ,EAAYE,YACcC,KAAnC3B,EAAOiB,SAASI,GAAKO,aACpB5B,EAAOiB,SAASI,GAAKO,cAAcJ,EAAYE,OAAK,MAAIF,EAAYK,OAEpE7B,EAAOiB,SAASI,GAAKO,aAAaJ,EAAYE,OAAK,MAAIF,EAAYK;;;;WAOzF,SAASf;YACPgB,MAAMhB,EAASiB;;QAGvB/B,EAAOgC,WAAW,SAASrB;QACvBI,QAAQC,IAAIL,IACZX,EAAOiC,YAAYtB,EAAKc,IACzBzB,EAAOkC;YACHR,MAAKf,EAAKe;YACVS,gBAAeC,OAAOzB,EAAKwB;;OAGlCnC,EAAOqC,aAAa,SAASC,GAAOC;QAChC,QAAOA;UACH,KAAK;YACDrC;gBACIU,KAAI,uBAAqBZ,EAAOiC;gBAChCO,QAAO;gBACP3B,SAAQZ,EAAWY;eACpBH,KAAK,SAASI;gBACbC,QAAQC,IAAIF,IACZ2B,EAAE,iBAAiBC,MAAM,SACzBC,SAAS;oBACLC,OAAOC,GAAG;wBAAyBC,SAAQ;;mBAC7C;eACJ,SAAShC;gBACPgB,MAAMhB,EAASiB","file":"userNetwork.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/2/8.\n */\nprivate_cloud.controller('userNetworkController',['$scope','$rootScope','$http','subnets_service',function($scope,$rootScope,$http,subnets_service){\n    $scope.adminstatus = {\n        true:'UP',\n        false:'DOWN'\n    };\n    subnets_service.getSubnets();\n    $rootScope.subnets_promise.promise.then(function(data){\n        $http({\n            url:'/api/net_networks/',\n            headers:$rootScope.headers\n        }).then(function(response){\n            console.log(response);\n            $scope.networks = response.data.networks;\n            angular.forEach($scope.networks,function(value,key) {\n                angular.forEach(value.subnets, function (subvalue) {\n                    angular.forEach(data,function(subnetvalue){\n                        if(subvalue == subnetvalue.id){\n                            console.log(subnetvalue.name);\n                            if($scope.networks[key].subnetInfo != undefined){\n                                $scope.networks[key].subnetInfo += subnetvalue.name+' '+subnetvalue.cidr;\n                            }else{\n                                $scope.networks[key].subnetInfo = subnetvalue.name+' '+subnetvalue.cidr;\n                            }\n                        }\n                    });\n                });\n            });\n            // $scope.networks = response.data.networks;\n        },function(response){\n            alert(response.statusText);\n        });\n    });\n    $scope.editData = function(data){ //编辑网络弹出框初始信息\n        console.log(data);\n        $scope.networkId = data.id;\n       $scope.editNetFormData = {\n           name:data.name,\n           admin_state_up:String(data.admin_state_up)\n       };\n    };\n    $scope.formSubmit = function($event,type){\n        switch(type){\n            case 'editNetwork':\n                $http({\n                    url:'/api/net_networks/'+$scope.networkId,\n                    method:'PUT',\n                    headers:$rootScope.headers\n                }).then(function(response){\n                    console.log(response);\n                    $('#edit_network').modal('hide');\n                    $timeout(function(){\n                        $state.go('etwork.userNetwork',{},{reload: true});\n                    },500);\n                },function(response){\n                    alert(response.statusText);\n                });\n                break;\n            case '':\n        }\n    };\n    \n}]);"]}