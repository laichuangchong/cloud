{"version":3,"sources":["../js/service.js"],"names":["private_cloud","service","$http","$rootScope","$timeout","getToken","userName","password","url","headers","Content-Type","method","data","auth","identity","methods","user","name","domain","scope","project","then","response","console","log","window","localStorage","setItem","token","id","token_promise","resolve","alert","error","message","allCheck","status","item_obj","angular","forEach","value","key","check_status","itemCheck","obj","mark","all_check"],"mappings":";AAGAA,cAAcC,QAAQ,kBAAiB,SAAS,cAAc,YAAY,SAAUC,GAAOC,GAAYC;IACnG;QAQIC,UAAU,SAAUC,GAAUC;YAC1BL;gBACIM,KAAK;gBACLC;oBACIC,gBAAgB;;gBAEpBC,QAAQ;gBACRC;oBACIC;wBACIC;4BACIC,WACI;4BAEJR;gCACIS;oCACIC,MAAQX;oCACRY;wCACID,MAAQ;;oCAEZV,UAAYA;;;;wBAIxBY;4BACIC;gCACIH,MAAQ;gCACRC;oCACID,MAAQ;;;;;;eAM7BI,KAAK,SAAUC;gBACdC,QAAQC,IAAIF,IACZG,OAAOC,aAAaC,QAAQ,SAASL,EAASb,UAAU;gBACxDgB,OAAOC,aAAaC,QAAQ,cAAcL,EAASV,KAAKgB,MAAMR,QAAQS,KACtEJ,OAAOC,aAAaC,QAAQ,YAAYrB;gBACxCmB,OAAOC,aAAaC,QAAQ,YAAYpB,IACxCJ,EAAW2B,cAAcC,QAAQT,EAASb,UAAU;eAErD,SAAUa;gBACTU,MAAMV,EAASV,KAAKqB,MAAMC;;;;MAM1ClC,cAAcC,QAAQ,qBAAqB;IACvC;QACIkC,UAAU,SAAUC,GAAQC;YACpBD,IACAE,QAAQC,QAAQF,GAAU,SAAUG,GAAOC;gBACvCD,EAAME,gBAAe;iBAIzBJ,QAAQC,QAAQF,GAAU,SAAUG,GAAOC;gBACvCD,EAAME,gBAAe;;;QAIjCC,WAAW,SAAUC,GAAKP;YACtB,IAAIQ,KAAO;YACXP,QAAQC,QAAQF,GAAU,SAAUG,GAAOC;gBAClCD,EAAME,iBACPE,EAAIE,aAAY,GAChBD,KAAO;gBAGXA,MACAD,EAAIE,aAAY","file":"service.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/1/9.\n */\nprivate_cloud.service('tokenService', ['$http', '$rootScope', '$timeout', function ($http, $rootScope, $timeout) {\n    return {\n        /*\"user\": {\n         \"name\": \"admin\",\n         \"domain\": {\n         \"name\": \"Default\"\n         },\n         \"password\": \"openstack\"\n         }*/\n        getToken: function (userName, password) { //登录服务用账号\n            $http({\n                url: './apiv1',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                method: 'POST',\n                data: {\n                    \"auth\": {\n                        \"identity\": {\n                            \"methods\": [\n                                \"password\"\n                            ],\n                            \"password\": {\n                                \"user\": {\n                                    \"name\": userName,\n                                    \"domain\": {\n                                        \"name\": \"Default\"\n                                    },\n                                    \"password\": password\n                                }\n                            }\n                        },\n                        \"scope\": {\n                            \"project\": {\n                                \"name\": \"admin\",\n                                \"domain\": {\n                                    \"name\": \"Default\"\n                                }\n                            }\n                        }\n                    }\n                }\n            }).then(function (response) {\n                console.log(response);\n                window.localStorage.setItem('token', response.headers()['x-subject-token']);\n                window.localStorage.setItem('project_id', response.data.token.project.id);\n                window.localStorage.setItem('username', userName);//用户名\n                window.localStorage.setItem('password', password);//密码\n                $rootScope.token_promise.resolve(response.headers()['x-subject-token']);\n\n            }, function (response) {\n                alert(response.data.error.message);\n            });\n        }\n    };\n\n}]);\nprivate_cloud.service('all_check_service', function () { //全选\n    return {\n        allCheck: function (status, item_obj) {\n            if (status) {\n                angular.forEach(item_obj, function (value, key) {\n                    value.check_status = true;\n                });\n\n            } else {\n                angular.forEach(item_obj, function (value, key) {\n                    value.check_status = false;\n                });\n            }\n        },\n        itemCheck: function (obj, item_obj) {\n            var mark = true;\n            angular.forEach(item_obj, function (value, key) {\n                if (!value.check_status) {\n                    obj.all_check = false;\n                    mark = false;\n                }\n            });\n            if (mark) {\n                obj.all_check = true;\n            }\n        }\n    };\n});"]}