{"version":3,"sources":["../js/controller/wall.js"],"names":["private_cloud","controller","$rootScope","$scope","$http","$timeout","$state","url","headers","then","response","console","log","walls","data","security_groups","alert","statusText","formData","formSubmit","method","security_group","name","wallName","description","$","modal","go","reload","deleteWall","wallId","key","confirm","splice"],"mappings":";AAGAA,cAAcC,WAAW,oBAAmB,cAAc,UAAU,SAAS,YAAY,UAAU,SAAUC,GAAYC,GAAQC,GAAOC,GAAUC;IAC9IF;QACIG,KAAK;QACLC,SAASN,EAAWM;OACrBC,KAAK,SAAUC;QACdC,QAAQC,IAAIF,IACZP,EAAOU,QAAQH,EAASI,KAAKC;OAC9B,SAAUL;QACTM,MAAMN,EAASO;QAEnBd,EAAOe,eACPf,EAAOgB,aAAa;QAChBf;YACIG,KAAK;YACLa,QAAQ;YACRZ,SAASN,EAAWM;YACpBM;gBACIO;oBACIC,MAAQnB,EAAOe,SAASK;oBACxBC,aAAerB,EAAOe,SAASM;;;WAGxCf,KAAK,SAAUC;YACdC,QAAQC,IAAIF,IACZe,EAAE,eAAeC,MAAM,SACvBrB,EAAS;gBACLC,EAAOqB,GAAG;oBAAsBC,SAAQ;;eACzC;WAEJ,SAAUlB;YACTM,MAAMN,EAASO;;OAGvBd,EAAO0B,aAAa,SAAUC,GAAQC,GAAKR;QACnCS,QAAQ,aAAaT,IAAW,SAChCnB;YACIG,KAAK,wBAAwBuB;YAC7BV,QAAQ;YACRZ,SAASN,EAAWM;WACrBC,KAAK,SAAUC;YACdC,QAAQC,IAAIF,IACZP,EAAOU,MAAMoB,OAAOF,GAAK;WAC1B,SAAUrB;YACTM,MAAMN,EAASO","file":"wall.min.js","sourcesContent":["/**\n * Created by chenzhongying on 2018/2/6.\n */\nprivate_cloud.controller('wallController', ['$rootScope', '$scope', '$http', '$timeout', '$state', function ($rootScope, $scope, $http, $timeout, $state) {\n    $http({\n        url: '/api/list_segroups',\n        headers: $rootScope.headers\n    }).then(function (response) {\n        console.log(response);\n        $scope.walls = response.data.security_groups;\n    }, function (response) {\n        alert(response.statusText);\n    });\n    $scope.formData = {};//初始化表单数据\n    $scope.formSubmit = function () { //创建防火墙\n        $http({\n            url: '/api/list_segroups/',\n            method: 'POST',\n            headers: $rootScope.headers,\n            data: {\n                \"security_group\": {\n                    \"name\": $scope.formData.wallName,\n                    \"description\": $scope.formData.description\n                }\n            }\n        }).then(function (response) {\n            console.log(response);\n            $('#creat_wall').modal('hide');\n            $timeout(function () {\n                $state.go('security.wall', {}, {reload: true});\n            }, 500);\n\n        }, function (response) {\n            alert(response.statusText);\n        });\n    };\n    $scope.deleteWall = function (wallId, key, wallName) { //删除防火墙\n        if (confirm('确定要删除防火墙' + wallName + '吗？')) {\n            $http({\n                url: '/api/list_segroups/' + wallId,\n                method: 'DELETE',\n                headers: $rootScope.headers\n            }).then(function (response) {\n                console.log(response);\n                $scope.walls.splice(key, 1);\n            }, function (response) {\n                alert(response.statusText);\n            });\n        }\n    };\n}]);"]}